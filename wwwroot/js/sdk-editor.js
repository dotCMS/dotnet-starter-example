var h=Object.defineProperty;var B=(e,t)=>{for(var n in t)h(e,n,{get:t[n],enumerable:!0})};function f(e){return e.map(t=>{let n=t.getBoundingClientRect(),o=Array.from(t.querySelectorAll('[data-dot-object="contentlet"]'));return{x:n.x,y:n.y,width:n.width,height:n.height,payload:JSON.stringify({container:C(t)}),contentlets:G(n,o)}})}function G(e,t){return t.map(n=>{let o=n.getBoundingClientRect();return{x:0,y:o.y-e.y,width:o.width,height:o.height,payload:JSON.stringify({container:n.dataset?.dotContainer?JSON.parse(n.dataset?.dotContainer):u(n),contentlet:{identifier:n.dataset?.dotIdentifier,title:n.dataset?.dotTitle,inode:n.dataset?.dotInode,contentType:n.dataset?.dotType}})}})}function C(e){return{acceptTypes:e.dataset?.dotAcceptTypes||"",identifier:e.dataset?.dotIdentifier||"",maxContentlets:e.dataset?.maxContentlets||"",uuid:e.dataset?.dotUuid||""}}function u(e){let t=e.closest('[data-dot-object="container"]');return t?C(t):(console.warn("No container found for the contentlet"),null)}function p(e){return e?e?.dataset?.dotObject==="contentlet"||e?.dataset?.dotObject==="container"&&e.children.length===0?e:p(e?.parentElement):null}function g(e){let t=e.querySelectorAll('[data-dot-object="vtl-file"]');return t.length?Array.from(t).map(n=>({inode:n.dataset?.dotInode,name:n.dataset?.dotUrl})):null}function N(){let e=document.documentElement.scrollHeight,t=window.innerHeight;return window.scrollY+t>=e}var s=(a=>(a.EDIT="EDIT_MODE",a.PREVIEW="PREVIEW_MODE",a.LIVE="LIVE",a.UNKNOWN="UNKNOWN",a))(s||{});function _(e){let t=n=>{n.data.name==="uve-set-page-data"&&e(n.data.payload)};return window.addEventListener("message",t),{unsubscribe:()=>{window.removeEventListener("message",t)},event:"changes"}}function L(e){let t=n=>{n.data.name==="uve-reload-page"&&e()};return window.addEventListener("message",t),{unsubscribe:()=>{window.removeEventListener("message",t)},event:"page-reload"}}function S(e){let t=n=>{if(n.data.name==="uve-request-bounds"){let o=Array.from(document.querySelectorAll('[data-dot-object="container"]')),a=f(o);e(a)}};return window.addEventListener("message",t),{unsubscribe:()=>{window.removeEventListener("message",t)},event:"request-bounds"}}function I(e){let t=n=>{if(n.data.name==="uve-scroll-inside-iframe"){let o=n.data.direction;e(o)}};return window.addEventListener("message",t),{unsubscribe:()=>{window.removeEventListener("message",t)},event:"iframe-scroll"}}function O(e){let t=n=>{let o=p(n.target);if(!o)return;let{x:a,y:d,width:l,height:c}=o.getBoundingClientRect(),V=o.dataset?.dotObject==="container",x={identifier:"TEMP_EMPTY_CONTENTLET",title:"TEMP_EMPTY_CONTENTLET",contentType:"TEMP_EMPTY_CONTENTLET_TYPE",inode:"TEMPY_EMPTY_CONTENTLET_INODE",widgetTitle:"TEMP_EMPTY_CONTENTLET",baseType:"TEMP_EMPTY_CONTENTLET",onNumberOfPages:1},P={identifier:o.dataset?.dotIdentifier,title:o.dataset?.dotTitle,inode:o.dataset?.dotInode,contentType:o.dataset?.dotType,baseType:o.dataset?.dotBasetype,widgetTitle:o.dataset?.dotWidgetTitle,onNumberOfPages:o.dataset?.dotOnNumberOfPages},H=g(o),A={container:o.dataset?.dotContainer?JSON.parse(o.dataset?.dotContainer):u(o),contentlet:V?x:P,vtlFiles:H};e({x:a,y:d,width:l,height:c,payload:A})};return document.addEventListener("pointermove",t),{unsubscribe:()=>{document.removeEventListener("pointermove",t)},event:"contentlet-hovered"}}var U={changes:e=>_(e),"page-reload":e=>L(e),"request-bounds":e=>S(e),"iframe-scroll":e=>I(e),"contentlet-hovered":e=>O(e)},T=e=>({unsubscribe:()=>{},event:e});function E(){if(typeof window>"u"||window.parent===window||!window.location)return;let e=new URL(window.location.href),t=Object.values(s),n=e.searchParams.get("mode")??"EDIT_MODE",o=e.searchParams.get("language_id"),a=e.searchParams.get("personaId"),d=e.searchParams.get("variantName"),l=e.searchParams.get("experimentId"),c=e.searchParams.get("publishDate");return t.includes(n)||(n="EDIT_MODE"),{mode:n,languageId:o,persona:a,variantName:d,experimentId:l,publishDate:c}}function i(e,t){if(!E())return console.warn("UVE Subscription: Not running inside UVE"),T(e);let n=U[e];return n?n(t):(console.error(`UVE Subscription: Event ${e} not found`),T(e))}function r(e){window.parent.postMessage(e,"*")}function F(e){r({action:"edit-contentlet",payload:e})}function Y(e){let{startLevel:t=1,depth:n=2}=e||{};r({action:"reorder-menu",payload:{startLevel:t,depth:n}})}function k(e,t){r({action:"init-inline-editing",payload:{type:e,data:t}})}function R(e){r({action:"set-bounds",payload:e})}function M(){let e=()=>{r({action:"scroll"})},t=()=>{r({action:"scroll-end"})};window.addEventListener("scroll",e),window.addEventListener("scrollend",t)}function y(){document.querySelectorAll('[data-dot-object="contentlet"]').forEach(t=>{t.clientHeight||t.classList.add("empty-contentlet")})}function b(){i("page-reload",()=>{window.location.reload()}),i("request-bounds",e=>{R(e)}),i("iframe-scroll",e=>{if(window.scrollY===0&&e==="up"||N()&&e==="down")return;let t=e==="up"?-120:120;window.scrollBy({left:0,top:t,behavior:"smooth"})}),i("contentlet-hovered",e=>{r({action:"set-contentlet",payload:e})})}function w(){r({action:"client-ready"})}var m={};B(m,{createUVESubscription:()=>i,editContentlet:()=>F,getUVEState:()=>E,initInlineEditing:()=>k,reorderMenu:()=>Y,sendMessageToEditor:()=>r});var j={...m};window.dotUVE=j;var q=E();q?.mode==="EDIT_MODE"&&(b(),M(),y(),w());console.log("New UVE editor.js file");

// dotUVE.createUVESubscription('changes', () => {
//     window.location.reload();
// })

